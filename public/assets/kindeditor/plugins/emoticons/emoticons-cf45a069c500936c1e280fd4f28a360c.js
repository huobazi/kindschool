/*******************************************************************************
* KindEditor - WYSIWYG HTML Editor for Internet
* Copyright (C) 2006-2011 kindsoft.net
*
* @author Roddy <luolonghao@gmail.com>
* @site http://www.kindsoft.net/
* @licence http://www.kindsoft.net/license.php
*******************************************************************************/
KindEditor.plugin("emoticons",function(e){var t=this,n="emoticons",a=t.emoticonsPath||t.pluginsPath+"emoticons/images/",i=void 0===t.allowPreviewEmoticons?!0:t.allowPreviewEmoticons,r=1;t.clickToolbar(n,function(){function o(n,i,r){x?n.mouseover(function(){i>v?(x.css("left",0),x.css("right","")):(x.css("left",""),x.css("right",0)),k.attr("src",a+r+".gif"),e(this).addClass("ke-on")}):n.mouseover(function(){e(this).addClass("ke-on")}),n.mouseout(function(){e(this).removeClass("ke-on")}),n.click(function(e){t.insertHtml('<img src="'+a+r+'.gif" border="0" alt="" />').hideMenu().focus(),e.stop()})}function s(t,n){var i=document.createElement("table");n.append(i),x&&(e(i).mouseover(function(){x.show("block")}),e(i).mouseout(function(){x.hide()}),b.push(e(i))),i.className="ke-table",i.cellPadding=0,i.cellSpacing=0,i.border=0;for(var r=(t-1)*g+m,s=0;u>s;s++)for(var l=i.insertRow(s),c=0;p>c;c++){var d=e(l.insertCell(c));d.addClass("ke-cell"),o(d,c,r);var h=e('<span class="ke-img"></span>').css("background-position","-"+24*r+"px 0px").css("background-image","url("+a+"static.gif)");d.append(h),b.push(d),r++}return i}function l(){e.each(b,function(){this.unbind()})}function c(e,t){e.click(function(e){l(),C.parentNode.removeChild(C),S.remove(),C=s(t,y),d(t),r=t,e.stop()})}function d(t){S=e('<div class="ke-page"></div>'),y.append(S);for(var n=1;f>=n;n++){if(t!==n){var a=e('<a href="javascript:;">['+n+"]</a>");c(a,n),S.append(a),b.push(a)}else S.append(e("@["+n+"]"));S.append(e("@&nbsp;"))}}var u=5,p=9,h=135,m=0,g=u*p,f=Math.ceil(h/g),v=Math.floor(p/2),y=e('<div class="ke-plugin-emoticons"></div>'),b=[],w=t.createMenu({name:n,beforeRemove:function(){l()}});w.div.append(y);var x,k;i&&(x=e('<div class="ke-preview"></div>').css("right",0),k=e('<img class="ke-preview-img" src="'+a+m+'.gif" />'),y.append(x),x.append(k));var S,C=s(r,y);d(r)})});