jQuery.fn.rater=function(e){var t={enabled:!0,url:"",method:"post",min:1,max:3,step:1,value:null,after_click:null,before_ajax:null,after_ajax:null,image:"/images/star.gif",width:25,height:25};e&&jQuery.extend(t,e);var i=jQuery('<ul class="rater-star"></ul>');i.css("background-image","url("+t.image+")"),i.css("height",t.height),i.css("width",t.width*((t.max-t.min)/t.step+1));var n=jQuery('<li class="rater-star-item-current"></li>');if(n.css("background-image","url("+t.image+")"),n.css("height",t.height),n.css("width",0),n.css("z-index",t.max/t.step+1),t.value&&n.css("width",((t.value-t.min)/t.step+1)*t.width),i.append(n),t.enabled)for(var s=t.min;s<=t.max;s+=t.step)n=jQuery('<li class="rater-star-item"></li>'),n.attr("title",s),n.css("height",t.height),n.css("width",t.width*((s-t.min)/t.step+1)),n.css("z-index",(t.max-s)/t.step+1),n.css("background-image","url("+t.image+")"),i.append(n);t.enabled&&i.mouseover(function(){jQuery(this).find(".rater-star-item-current").hide()}).mouseout(function(){jQuery(this).find(".rater-star-item-current").show()}),i.find(".rater-star-item").mouseover(function(){jQuery(this).attr("class","rater-star-item-hover")}).mouseout(function(){jQuery(this).attr("class","rater-star-item")}).click(function(){jQuery(this).prevAll(".rater-star-item-current").css("width",jQuery(this).width());var e=(t.max-t.min)/t.step+1,i=jQuery(this).width()/t.width,n=t.min+(i-1)*t.step,s={value:n,number:i,count:e,min:t.min,max:t.max};"function"==typeof t.after_click&&t.after_click(s),t.url&&jQuery.ajax({data:s,type:t.method,url:t.url,beforeSend:function(){"function"==typeof t.before_ajax&&t.before_ajax(s)},success:function(e){"function"==typeof t.after_ajax&&t.after_ajax(e)}})}),jQuery(this).html(i)};