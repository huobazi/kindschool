<% f = form %>
<script type="text/javascript">
  jQuery(function() {
    $('#activity_start_at').datepicker({
      language: "zh-CN",
      format:"yyyy-mm-dd"
    });
    $('#activity_end_at').datepicker({
      language: "zh-CN",
      format:"yyyy-mm-dd"
    });
  });
</script>
<%= f.input :title, :validate => true, :required => true, :input_html => {:class => "span5 profile_input required"} %>
<% if action_name == "new" %>
  <%= f.input :start_at, :validate => true, :required => true, :as => :string, :input_html => {:class => "input-mediun span5 time_datepicker"} %>
  <%= f.input :end_at, :validate => true, :required => true, :as => :string, :input_html => {:class => "input-mediun span5 time_datepicker"} %>
<% else %>
  <%= f.input :start_at, :required => true, :as => :string, :input_html => {:class => "input-mediun", :value => "#{f.object.start_at.to_short_datetime}"} %>
  <%= f.input :end_at, :required => true, :as => :string, :input_html => {:class => "input-mediun", :value => "#{f.object.end_at.to_short_datetime}"} %>
<% end %>
<div class="control-group">
    <%= f.kindeditor :content, :class => 'profile_input required', :editor_id => 'activity_content',:allowFileManager => false,:allowUpload=>false%>
</div>

<div class="clear"></div>
<%= f.input :note, :input_html => {:rows => "10", :class => "span5"}%>

<%= f.simple_fields_for :asset_img_attributes do |p| %>
  <%= p.input :uploaded_data, :as => :file, :name => "asset_img"  %>
<% end %>

<%= f.input :kindergarten_label, :required => true, :as => :string, :input_html => { :disabled => true } %>
<%= f.input :kindergarten_id, :as => :hidden %>
<%= f.input :creater_id, :as => :hidden %>
<%= f.input :tp, :as => :hidden %>

<div class="control-group">
  <div class="controls">
    <%= f.button :submit %>
  </div>
</div>

<script type="text/javascript">
  $("input[type='submit']").click(function(){
    if (activity_content.html().length < 9 || activity_content.isEmpty()) {
      if ( $("#activity_content").next("span.help-inline").length == 0 ) {
        $("<span class='help-inline'>长度不够或为空<span>").insertAfter("#activity_content")
        return false;
      }
    } else {
        if ( $("#activity_content").next("span.help-inline").length > 0 ) {
          $("#activity_content").next("span.help-inline").remove()
        }
        return true;
    }
  })
</script>
